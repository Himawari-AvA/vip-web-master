(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-698b7498"],{"059c":function(t,e,a){t.exports=a.p+"static/img/admin.cf376cee.png"},"454f":function(t,e,a){a("46a7");var i=a("584a").Object;t.exports=function(t,e,a){return i.defineProperty(t,e,a)}},"46a7":function(t,e,a){var i=a("63b6");i(i.S+i.F*!a("8e60"),"Object",{defineProperty:a("d9f6").f})},5834:function(t,e,a){"use strict";var i=a("befc"),n=a.n(i);n.a},"7ed4":function(t,e,a){"use strict";var i=a("2b0e"),n=new i["default"];e["a"]=n},"85f2":function(t,e,a){t.exports=a("454f")},bb9c:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:8}},[i("el-card",{staticClass:"mgb20",staticStyle:{height:"252px"},attrs:{shadow:"hover"}},[i("div",{staticClass:"user-info"},[i("img",{staticClass:"user-avator",attrs:{src:a("059c"),alt:""}}),i("div",{staticClass:"user-info-cont"},[i("div",{staticClass:"user-info-name"},[t._v(t._s(t.managerData.name))]),i("div",[t._v(t._s(t.managerData.role))])])]),i("div",{staticClass:"user-info-list"},[t._v("\n                    管理员ID\n                    "),i("span",[t._v(t._s(t.managerData.managerId))])]),i("div",{staticClass:"user-info-list"},[t._v("\n                    工作时长\n                    "),i("span",[t._v(t._s(t.workTime))])])])],1),i("el-col",{attrs:{span:16}},[i("el-row",{staticClass:"mgb20",attrs:{gutter:20}},[i("el-col",{attrs:{span:8}},[i("el-card",{attrs:{shadow:"hover","body-style":{padding:"0px"}}},[i("div",{staticClass:"grid-content grid-con-1"},[i("i",{staticClass:"el-icon-lx-people grid-con-icon"}),i("div",{staticClass:"grid-cont-right"},[i("div",{staticClass:"grid-num"},[t._v(t._s(t.statisticData.memberNum))]),i("div",[t._v("会员人数")])])])])],1)],1)],1)],1)],1)},n=[],s=a("bd86"),r=a("7ed4"),o=a("365c"),c={name:"homepage",data:function(){return{query:{pageIndex:1,pageSize:4,movieId:"",managerId:localStorage.getItem("managerId")},movieData:[],movieAllData:[],managerData:{},dealData:{},statisticData:{},pageTotal:0,form:{},insertForm:{},editVisible:!1,insertVisible:!1,total:0,multipleSelection:[],defaultManagerId:"admin",timer:"",workTime:""}},created:function(){var t=this,e=this;this.getMovieData(),this.getManagerData(),this.getStatisticData(),this.getDealData(),r["a"].$on("member-change",(function(){t.getStatisticData()})),r["a"].$on("card-change",(function(){t.getStatisticData()})),r["a"].$on("integral-change",(function(){t.getDealData()})),r["a"].$on("recharge-change",(function(){t.getDealData()})),r["a"].$on("movie-change",(function(){t.getStatisticData(),t.getDealData()})),e.timer=setInterval((function(){e.workTime=e.getHour()+new Date(new Date-new Date(e.managerData.time)).getMinutes()+":"+e.getSecond()}),1e3)},beforeMount:function(){},beforeDestroy:function(){this.timer&&clearInterval(this.timer)},computed:{totalNumber:function(){return this.dealData.consume+this.dealData.recharge+this.dealData.integral},getDealRadio:function(){return Math.round(this.dealData.consume/this.totalNumber*100)},rechargeRadio:function(){return Math.round(this.dealData.recharge/this.totalNumber*100)},integralRadio:function(){return Math.round(this.dealData.integral/this.totalNumber*100)}},methods:Object(s["a"])({getSecond:function(){var t=new Date(new Date-new Date(this.managerData.time)).getSeconds();return t<10?"0"+t:t},getHour:function(){var t=new Date(new Date-new Date(this.managerData.time)).getHours()-8;return t>0?t+":":""},handleDelete:function(t,e){var a=this;this.$confirm("确定要删除吗？","提示",{type:"warning"}).then((function(){Object(o["e"])(e).then((function(t){200==t.status?(a.$message.success("删除成功"),a.getMovieData()):a.$message.error("删除失败，服务器出现故障")}))})).catch((function(){}))},handleEdit:function(t,e){this.idx=t,this.form=e,this.editVisible=!0},saveEdit:function(){var t=this;Object(o["q"])(this.form).then((function(e){200==e.status?(t.editVisible=!1,t.$message.success("修改第 ".concat(t.idx+1," 行成功")),t.getMovieData()):t.$message.error("修改失败，服务端出现错误")}))},handlePageChange:function(t){var e;this.$set(this.query,"pageIndex",t),this.movieData=[];var a=(this.query.pageIndex-1)*this.query.pageSize,i=this.query.pageSize*this.query.pageIndex;for(this.pageTotal<i&&(i=this.pageTotal),e=a;e<i;e++)this.movieData.push(this.movieAllData[e])},getMovieData:function(){var t=this,e={pageIndex:this.query.pageIndex,pageSize:0};Object(o["r"])(e).then((function(e){var a;t.movieData=[],t.movieAllData=e.data.list,t.pageTotal=e.data.pageTotal||20;var i=(t.query.pageIndex-1)*t.query.pageSize,n=t.query.pageSize*t.query.pageIndex;for(t.pageTotal<n&&(n=t.pageTotal),a=i;a<n;a++)t.movieData.push(t.movieAllData[a]);localStorage.setItem("movieData",JSON.stringify(t.movieAllData)),r["a"].$emit("movieData-change")}))},getManagerData:function(){var t=this;Object(o["m"])(this.query).then((function(e){t.managerData=e.data,t.workTime=t.getHour()+new Date(new Date-new Date(t.managerData.time)).getMinutes()+":"+t.getSecond()}))},getDealData:function(){var t=this;Object(o["c"])().then((function(e){t.dealData=e}))},getStatisticData:function(){var t=this;Object(o["y"])().then((function(e){t.statisticData=e.data}))},handleSelectionChange:function(t){this.multipleSelection=t},handleInsertMovie:function(){this.insertForm={},this.insertVisible=!0},saveMovie:function(){var t=this;Object(o["j"])(this.insertForm).then((function(e){200==e.status?(t.insertVisible=!1,t.$message.success("添加成功"),t.getMovieData()):(t.insertVisible=!1,t.$message.success("添加失败，服务端出现问题"))}))}},"getDealData",(function(){var t=this;Object(o["x"])().then((function(e){200==e.status&&(t.dealData=e.data)}))}))},u=c,l=(a("5834"),a("2877")),g=Object(l["a"])(u,i,n,!1,null,"3d40cbba",null);e["default"]=g.exports},bd86:function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));var i=a("85f2"),n=a.n(i);function s(t,e,a){return e in t?n()(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}},befc:function(t,e,a){}}]);